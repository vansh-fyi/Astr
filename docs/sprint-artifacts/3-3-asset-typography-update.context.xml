<story-context>
  <story-id>3.3</story-id>
  <story-key>3-3-asset-typography-update</story-key>
  <title>Asset & Typography Update</title>
  <status>ready-for-dev</status>

  <user-story>
    <role>User</role>
    <action>a polished visual experience with consistent fonts and icons</action>
    <benefit>the app feels modern, premium, and aligns with the "Glass UI" aesthetic</benefit>
  </user-story>

  <acceptance-criteria>
    <criterion id="1">
      <description>Typography: Replace Nunito with Satoshi globally. Ensure weights/sizes map correctly to preserve hierarchy.</description>
    </criterion>
    <criterion id="2">
      <description>Assets: Integrate high-quality WebP assets for Moon Phases and Sun. Implement new SVG/Lottie splash screen.</description>
    </criterion>
  </acceptance-criteria>

  <tasks>
    <task id="1">Implement Satoshi Font (AC: #1)</task>
    <task id="2">Update Moon & Sun Assets (AC: #2)</task>
    <task id="3">Implement Splash Screen (AC: #2)</task>
    <task id="4">Verification (AC: #1, #2)</task>
  </tasks>

  <artifacts>
    <docs>
      <doc>
        <path>docs/sprint-artifacts/tech-spec-epic-3.md</path>
        <title>Epic 3 Tech Spec</title>
        <section>Detailed Design</section>
        <snippet>Visual Polish: Replacing Nunito with Satoshi font, updating icons to WebP, and implementing a custom Splash Screen.</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture Decision Document</title>
        <section>Project Structure</section>
        <snippet>assets/fonts/ [NEW] Satoshi font files. assets/images/light_pollution/ [NEW] world_lp.webp</snippet>
      </doc>
    </docs>

    <code>
      <item>
        <path>pubspec.yaml</path>
        <kind>config</kind>
        <reason>Defines fonts (Nunito -> Satoshi) and asset paths</reason>
      </item>
      <item>
        <path>lib/config/theme/theme_logic.dart</path>
        <kind>logic</kind>
        <reason>Likely handles theme switching and font application</reason>
      </item>
      <item>
        <path>lib/main.dart</path>
        <kind>entry</kind>
        <reason>App entry point, currently handles flutter_native_splash</reason>
      </item>
      <item>
        <path>lib/my_app.dart</path>
        <kind>widget</kind>
        <reason>Root widget where MaterialApp/Theme is configured</reason>
      </item>
    </code>

    <dependencies>
      <dep>google_fonts</dep>
      <dep>flutter_svg</dep>
      <dep>lottie</dep>
      <dep>flutter_native_splash</dep>
    </dependencies>
  </artifacts>

  <constraints>
    <constraint>Zero Layout Changes: Optimizations must be internal. Asset swaps must fit existing containers.</constraint>
    <constraint>Assets: Follow the project structure for assets/fonts and assets/images.</constraint>
    <constraint>Performance: Ensure asset loading is efficient (asynchronous where possible).</constraint>
  </constraints>

  <testing>
    <standards>Visual QA is primary for this story. Verify font weights and asset scaling on different screen sizes.</standards>
    <ideas>
      <idea ac="1">Check font rendering on Home, Catalog, and Settings screens</idea>
      <idea ac="2">Verify new Moon/Sun icons appear correctly in widgets</idea>
      <idea ac="2">Verify splash screen animation and transition smoothness</idea>
    </ideas>
  </testing>
</story-context>
