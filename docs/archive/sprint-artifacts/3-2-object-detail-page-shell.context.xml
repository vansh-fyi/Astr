<story-context id="3-2-object-detail-page-shell" v="1.0">
  <metadata>
    <epicId>3</epicId>
    <storyId>3.2</storyId>
    <title>Object Detail Page Shell</title>
    <status>drafted</status>
    <generatedAt>2025-11-29</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/sprint-artifacts/3-2-object-detail-page-shell.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>User</asA>
    <iWant>to tap an object to see its full details</iWant>
    <soThat>I can learn more about it</soThat>
    <tasks>
      - [ ] **Routing** (AC: 1)
        - [ ] Ensure `/catalog/:objectId` route is registered in router configuration.
        - [ ] Verify navigation from `CatalogScreen` passes `objectId` correctly.
      - [ ] **Presentation Layer** (AC: 1, 2, 3, 4, 5, 6)
        - [ ] Expand `ObjectDetailScreen` (currently placeholder) to full implementation.
        - [ ] Create `ObjectDetailNotifier` (Riverpod) to load object by ID.
        - [ ] Implement header section: Large title, type badge, hero icon.
        - [ ] Implement data cards section: Magnitude, Distance, Rise/Set.
        - [ ] Add "Visibility Graph - Coming Soon" placeholder section.
        - [ ] Apply "Deep Cosmos" background theme.
      - [ ] **Data Integration** (AC: 4)
        - [ ] Fetch object by ID using `ICatalogRepository.getObjectById()`.
        - [ ] Handle loading and error states.
        - [ ] Display fetched data in UI.
      - [ ] **Testing**
        - [ ] Unit Test: `ObjectDetailNotifier` correctly loads object by ID.
        - [ ] Unit Test: Error handling for non-existent object ID.
        - [ ] Widget Test: Navigation from catalog to detail.
        - [ ] Widget Test: Detail page displays object name and type.
    </tasks>
  </story>

  <acceptanceCriteria>
    1.  **Navigation:** Tapping object from catalog opens full-screen detail page.
    2.  **Page Background:** Uses "Deep Cosmos" theme (`#0A0E27`).
    3.  **Object Header:** Large title, celestial type badge, hero icon.
    4.  **Basic Data Display:** Magnitude, Distance, Rise/Set times (placeholders).
    5.  **Glass Styling:** Uses `GlassPanel` components for data cards.
    6.  **Placeholder for Graph:** Reserved section for Visibility Graph (Story 3.3) with "Coming Soon" indicator.
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/sprint-artifacts/tech-spec-epic-3.md</path>
        <title>Epic 3 Tech Spec</title>
        <section>Detailed Design</section>
        <snippet>Defines ObjectDetailPage workflow and data requirements.</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture</title>
        <section>Project Structure, Glass Pattern</section>
        <snippet>Defines feature module structure and Glass Pattern for UI consistency.</snippet>
      </doc>
      <doc>
        <path>docs/sprint-artifacts/3-1-celestial-objects-catalog-list.md</path>
        <title>Story 3.1 (Previous Story)</title>
        <section>Learnings, File List</section>
        <snippet>Context on placeholder patterns, existing catalog infrastructure, and testing standards.</snippet>
      </doc>
    </docs>
    <code>
      <item>
        <path>lib/features/catalog/domain/repositories/i_catalog_repository.dart</path>
        <kind>interface</kind>
        <symbol>ICatalogRepository.getObjectById</symbol>
        <reason>Required for fetching object by ID.</reason>
      </item>
      <item>
        <path>lib/features/catalog/domain/entities/celestial_object.dart</path>
        <kind>entity</kind>
        <symbol>CelestialObject</symbol>
        <reason>Data model for displaying object details.</reason>
      </item>
      <item>
        <path>lib/features/catalog/presentation/screens/object_detail_screen.dart</path>
        <kind>screen</kind>
        <symbol>ObjectDetailScreen</symbol>
        <reason>Existing placeholder screen to be expanded.</reason>
      </item>
      <item>
        <path>lib/core/widgets/glass_panel.dart</path>
        <kind>widget</kind>
        <symbol>GlassPanel</symbol>
        <reason>Standard UI container for data cards.</reason>
      </item>
      <item>
        <path>lib/features/catalog/presentation/screens/catalog_screen.dart</path>
        <kind>screen</kind>
        <symbol>CatalogScreen</symbol>
        <reason>Source of navigation - verify route passing.</reason>
        <note>Line 117: context.push('/catalog/${object.id}')</note>
      </item>
    </code>
    <dependencies>
      <dep>flutter_riverpod</dep>
      <dep>fpdart</dep>
      <dep>go_router</dep>
    </dependencies>
  </artifacts>

  <constraints>
    - Must work offline (no API calls).
    - Must use "Deep Cosmos" theme (#0A0E27).
    - Must maintain visual consistency with Story 3.1 (Glass Pattern).
    - Rise/Set times: Continue using placeholder pattern from Story 3.1.
  </constraints>

  <interfaces>
    <interface>
      <name>ICatalogRepository</name>
      <signature>Future&lt;Either&lt;Failure, CelestialObject&gt;&gt; getObjectById(String id)</signature>
    </interface>
  </interfaces>

  <tests>
    <standards>Unit tests for Notifier logic. Widget tests for navigation and UI display.</standards>
    <locations>test/features/catalog/</locations>
    <ideas>
      - Test ObjectDetailNotifier loads object successfully
      - Test ObjectDetailNotifier handles missing object ID
      - Test navigation from catalog passes correct objectId
      - Test detail page displays object name correctly
      - Test "Coming Soon" placeholder is visible
    </ideas>
  </tests>
</story-context>
